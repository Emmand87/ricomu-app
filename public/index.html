<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>RICOMU • Ricorso Multe Online | Scansione verbale e ricorso automatico</title>
  <meta name="description" content="RICOMU: carichi o scatti una foto al verbale e ottieni un ricorso completo (min. 2000 parole) con motivi principali e fonti ufficiali. Paghi solo se ti serve il PDF finale.">
  <meta name="keywords" content="ricorso multe, ricorso verbale, codice della strada, autovelox, notifica tardiva, PEC, Prefetto, Giudice di Pace">
  <meta property="og:title" content="RICOMU • Ricorso Multe Online">
  <meta property="og:description" content="Scatta la foto al verbale, noi generiamo il ricorso completo con AI e fonti ufficiali.">
  <meta property="og:type" content="website">
  <meta property="og:image" content="/og-cover.png">
  <meta name="theme-color" content="#111827">

  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="/styles.css">
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebApplication",
    "name":"RICOMU - Ricorso Multe in Italia",
    "applicationCategory":"LegalService",
    "operatingSystem":"Web",
    "description":"Carica o scatta una foto al verbale e ottieni un ricorso completo e personalizzato con AI.",
    "url":"https://ricomu-app.onrender.com",
    "publisher":{"@type":"Organization","name":"RICOMU"}
  }
  </script>
</head>
<body>
  <header class="header">
    <div class="container header-inner">
      <div class="brand">
        <div class="logo">R</div>
        <h1>RICOMU — Ricorso Multe in Italia</h1>
      </div>
      <p class="tagline">
  Scansiona la multa e fai ricorso in 3 minuti. 
  <span class="muted">Fonti ufficiali sempre aggiornate tramite AI. Oltre il 90% di ricorsi vinti! Prova RICOMU.</span>
</p>
      <div class="cta-row">
        <a href="#scan" class="btn btn-primary">Scansiona con fotocamera</a>
        <a href="#upload" class="btn btn-ghost">Carica PDF/Foto</a>
      </div>
    </div>
    <div class="hero-wave"></div>
  </header>

  <main class="container">
    <!-- STEP 1A: SCANSIONE FOTOCAMERA -->
    <section id="scan" class="card">
      <h2>Scansiona il verbale con la fotocamera</h2>
      <p class="muted">Ottimizzato per mobile: inquadra il verbale, scatta, ritenta se necessario e aggiungi più pagine.</p>

      <div id="cameraBlock" class="camera">
        <video id="camVideo" playsinline autoplay muted></video>
        <canvas id="camCanvas" class="hidden"></canvas>
        <div class="cam-overlay"></div>
        <div class="cam-controls">
          <button id="btnStartCam" class="btn btn-outline">Attiva fotocamera</button>
          <button id="btnShot" class="btn btn-primary hidden">Scatta</button>
          <button id="btnRetake" class="btn btn-ghost hidden">Riscatta</button>
          <button id="btnAddPage" class="btn btn-outline hidden">Aggiungi pagina</button>
          <button id="btnFinishScan" class="btn btn-success hidden">Invia scansioni</button>
        </div>
        <div id="scanThumbs" class="thumbs"></div>
        <p id="scanStatus" class="muted"></p>
      </div>
    </section>

    <!-- STEP 1B: UPLOAD FILE CLASSICO -->
    <section id="upload" class="card">
      <h2>Oppure carica PDF o foto</h2>
      <div class="upload-row">
        <input id="file" type="file" accept="image/*,.jpg,.jpeg,.png,application/pdf" capture="environment"/>
        <button class="btn" id="btnUpload">Leggi la multa</button>
      </div>
      <p id="s1status" class="muted"></p>
    </section>

    <!-- STEP 2: RIEPILOGO / MOTIVI -->
    <section id="step2" class="card hidden">
      <h2>Riepilogo e motivi del ricorso</h2>
      <div id="summary"></div>
    </section>

    <!-- STEP 3: CORREZIONI -->
    <section id="step3" class="card hidden">
      <h2>Correggi eventuali errori</h2>
      <div class="grid">
        <div><label>Numero verbale</label><input id="v_number" type="text"/></div>
        <div><label>Autorità</label><input id="v_authority" type="text"/></div>
        <div><label>Articolo CdS</label><input id="v_article" type="text"/></div>
        <div><label>Luogo</label><input id="v_place" type="text"/></div>
        <div><label>Data infrazione</label><input id="v_dateInfrazione" type="date"/></div>
        <div><label>Data notifica</label><input id="v_dateNotifica" type="date"/></div>
        <div><label>Importo (€)</label><input id="v_amount" type="number"/></div>
        <div><label>Targa</label><input id="v_targa" type="text"/></div>
      </div>
      <p class="muted">Dati anagrafici</p>
      <div class="grid">
        <div><label>Nome Cognome</label><input id="u_name" type="text"/></div>
        <div><label>Comune</label><input id="u_comune" type="text"/></div>
        <div><label>Data di nascita</label><input id="u_dob" type="date"/></div>
        <div><label>Indirizzo</label><input id="u_addr" type="text"/></div>
        <div><label>Codice Fiscale</label><input id="u_cf" type="text"/></div>
      </div>
      <div style="margin-top:10px;"><button class="btn" id="btnSaveCorrections">Salva correzioni & ricalcola</button></div>
    </section>

    <!-- STEP 5: ANTEPRIMA -->
    <section id="step5" class="card hidden">
      <h2>Anteprima a tempo (non cliccabile/selezionabile)</h2>
      <p class="muted">Watermark “BOZZA NON UTILIZZABILE”, visibile 30 secondi; poi si passa al pagamento.</p>
      <div><button class="btn" id="btnPreview">Genera anteprima</button></div>
      <div id="previewCanvasWrap" class="muted" style="margin-top:10px;"></div>
      <p id="previewTimer" class="muted"></p>
    </section>

    <!-- STEP 6: PAGAMENTO -->
    <section id="step6" class="card hidden">
      <h2>Pagamento</h2>
      <p id="price" class="muted" style="font-weight:bold;"></p>
      <div><button class="btn btn-primary" id="btnPay">Paga con Stripe (test)</button></div>
      <p class="muted">Carta test: 4242 4242 4242 4242</p>
    </section>

    <!-- STEP 7: FINALE -->
    <section id="step7" class="card hidden">
      <h2>Scarica PDF finale</h2>
      <a class="btn btn-success" id="btnFinal" href="#" download>Scarica il PDF</a>
    </section>

    <!-- STEP 8/9: ISTRUZIONI E VADEMECUM -->
    <section id="step8" class="card hidden">
      <h2>Invio PEC / Raccomandata</h2>
      <p><strong>PEC:</strong> invia all’indirizzo PEC dell’ente indicato nel verbale. Oggetto: “Ricorso avverso verbale n. [Numero]”.</p>
      <p><strong>Raccomandata A/R:</strong> stampa PDF, firma, allega documento, busta con dicitura “Ricorso avverso verbale n. [Numero]”.</p>
    </section>

    <section id="step9" class="card hidden">
      <h2>Vademecum</h2>
      <p id="vademecum"></p>
      <p class="muted">Parametri configurabili. Verifica normativa aggiornata.</p>
    </section>
  </main>

  <footer class="footer">
    <div class="container">
      <p>© RICOMU — Ricorso Multe in Italia</p>
    </div>
  </footer>

  <script src="/app.js" defer></script>
  <!-- Overlay loader -->
  <div id="loaderOverlay" class="loader-overlay hidden" aria-hidden="true">
    <div class="loader-card">
      <!-- Spinner stile “Microsoft” -->
      <div class="spinner-ring" aria-label="Elaborazione in corso"></div>
      <p class="loader-title">Elaborazione in corso…</p>
      <p class="loader-sub">Stiamo analizzando il verbale con AI e OCR.<br/>Attendi ~1 minuto.</p>
    </div>
  </div>
</body>
</html>
