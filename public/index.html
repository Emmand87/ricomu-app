<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>RICOMU – Ricorso Multe in Italia</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;background:#f8fafc;}
    header{background:#111827;color:#fff;padding:18px 24px}
    header h1{margin:0;font-size:22px;letter-spacing:.5px}
    .container{max-width:820px;margin:0 auto;padding:24px;}
    .card{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:20px;margin:16px 0;box-shadow:0 1px 2px rgba(0,0,0,.04);}
    .btn{display:inline-block;background:#111827;color:#fff;padding:10px 14px;border-radius:8px;border:0;cursor:pointer}
    .muted{color:#6b7280;font-size:14px}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .hidden{display:none}
    .pill{display:inline-block;background:#eef2ff;color:#3730a3;padding:4px 8px;border-radius:999px;font-size:12px}
  </style>
</head>
<body>
  <header><h1>RICOMU — Ricorso Multe in Italia</h1></header>

  <div class="container">
    <div id="step1" class="card">
      <p class="muted">Carica subito la foto o il PDF della multa. RICOMU leggerà i dati e preparerà il ricorso.</p>
      <input id="file" type="file" accept="image/*,.jpg,.jpeg,.png,application/pdf" capture="environment"/>
      <div style="margin-top:10px;"><button class="btn" id="btnUpload">Leggi la multa</button></div>
      <p id="s1status" class="muted"></p>
    </div>

    <div id="step2" class="card hidden">
      <h3>Riepilogo & motivo centrale (AI)</h3>
      <div id="summary"></div>
    </div>

    <div id="step3" class="card hidden">
      <h3>Correggi eventuali errori</h3>
      <div class="grid">
        <div><label>Numero verbale</label><input id="v_number" type="text"/></div>
        <div><label>Autorità</label><input id="v_authority" type="text"/></div>
        <div><label>Articolo CdS</label><input id="v_article" type="text"/></div>
        <div><label>Luogo</label><input id="v_place" type="text"/></div>
        <div><label>Data infrazione</label><input id="v_dateInfrazione" type="date"/></div>
        <div><label>Data notifica</label><input id="v_dateNotifica" type="date"/></div>
        <div><label>Importo (€)</label><input id="v_amount" type="number"/></div>
        <div><label>Targa</label><input id="v_targa" type="text"/></div>
      </div>
      <p class="muted">Dati anagrafici</p>
      <div class="grid">
        <div><label>Nome Cognome</label><input id="u_name" type="text"/></div>
        <div><label>Comune</label><input id="u_comune" type="text"/></div>
        <div><label>Data di nascita</label><input id="u_dob" type="date"/></div>
        <div><label>Indirizzo</label><input id="u_addr" type="text"/></div>
        <div><label>Codice Fiscale</label><input id="u_cf" type="text"/></div>
      </div>
      <div style="margin-top:10px;"><button class="btn" id="btnSaveCorrections">Salva correzioni & ricalcola</button></div>
    </div>

    <div id="step5" class="card hidden">
      <h3>Anteprima a tempo (non cliccabile/selezionabile)</h3>
      <p class="muted">Watermark “BOZZA NON UTILIZZABILE”, visibile 30 secondi e poi scompare.</p>
      <div><button class="btn" id="btnPreview">Genera anteprima</button></div>
      <div id="previewCanvasWrap" class="muted" style="margin-top:10px;"></div>
      <p id="previewTimer" class="muted"></p>
    </div>

    <div id="step6" class="card hidden">
      <h3>Pagamento (Stripe test)</h3>
      <p id="price" class="muted" style="font-weight:bold;"></p>
      <div><button class="btn" id="btnPay">Paga con Stripe (test)</button></div>
      <p class="muted">Usa una carta test (es. 4242 4242 4242 4242).</p>
    </div>

    <div id="step7" class="card hidden">
      <h3>Scarica PDF finale</h3>
      <a class="btn" id="btnFinal" href="#" download>Scarica il PDF</a>
    </div>

    <div id="step8" class="card hidden">
      <h3>Invio PEC / Raccomandata</h3>
      <p><strong>PEC:</strong> invia all’indirizzo PEC dell’ente indicato nel verbale. Oggetto: “Ricorso avverso verbale n. [Numero]”.</p>
      <p><strong>Raccomandata A/R:</strong> stampa PDF, firma, allega documento, busta con dicitura “Ricorso avverso verbale n. [Numero]”.</p>
    </div>

    <div id="step9" class="card hidden">
      <h3>Vademecum (date di attesa)</h3>
      <p id="vademecum"></p>
      <p class="muted">Parametri configurabili. Verifica normativa aggiornata.</p>
    </div>
  </div>
  <script src="app.js"></script>
</body>
</html>
